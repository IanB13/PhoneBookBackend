(window.webpackJsonpcourseinfo=window.webpackJsonpcourseinfo||[]).push([[0],{18:function(e,t,n){e.exports=n(42)},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(17),c=n.n(o),s=n(2),u=n.n(s),l=n(5),i=n(3),f=n(6),m=n(7),p=n(4),b=n.n(p);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var d="http://localhost:3001/api/persons",v={getPeople:function(){var e=Object(l.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.a.get(d),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),deletePerson:function(e,t){if(window.confirm("Are you sure you want to delete ".concat(t))){var n="".concat(d,"/").concat(e);return console.log(n),console.log(e),b.a.delete(n)}},changeNumber:function(e,t){var n="".concat(d,"/").concat(e.id);b.a.put(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{number:t})).then(function(e){console.log(e.data)}).catch(function(e){console.log(e)})},createPerson:function(e){return b.a.post(d,e)}};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var w=function(e){var t=e.persons,n=e.setPersons,r=Object(m.a)(e,["persons","setPersons"]),o=r.newName,c=r.setNewName,s=r.newNumber,u=r.setNewNumber,l=function(e,t){var n=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var s=o.value;if(s.name===t)return s}}catch(u){r=!0,a=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}};return a.a.createElement(a.a.Fragment,null,a.a.createElement("form",null,a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:o,onChange:function(e){e.preventDefault(),c(e.target.value)}})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:s,onChange:function(e){e.preventDefault(),u(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault();var a=l(t,o);if(void 0===a)v.createPerson({name:o,number:s}).then(function(e){n(t.concat({name:o,number:s})),c(""),u(""),r.setMessage("Added ".concat(o))}).catch(function(e){console.log(e.response.data);var t=JSON.stringify(e.response.data);r.setMessage(t)});else if(window.confirm("".concat(o," is already added to phonebook, change number?"))){console.log("MatchPerson is:"),console.log(a),v.changeNumber(a,s);var i=t.map(function(e){return e.name!==o?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{number:s})});console.log("new set is:"),n(i),c(""),u(""),r.setMessage("Changed ".concat(a.name,"'s number to ").concat(s))}}},"add"))))},h=function(e){var t=e.newfilter,n=e.setFilter;return a.a.createElement(a.a.Fragment,null,"filter shown with:",a.a.createElement("input",{value:t,onChange:function(e){e.preventDefault(),n(e.target.value)}}))},y=function(e){return a.a.createElement("div",null,e.name," ",e.number,a.a.createElement("button",{onClick:e.deleteID}," Delete "))},j=function(e){var t=e.setPersons,n=e.setMessage,r=Object(m.a)(e,["setPersons","setMessage"]),o=""===r.filter?r.persons:r.persons.filter(function(e){return e.name.toLowerCase().includes(r.filter.toLowerCase())});return a.a.createElement("div",null,o.map(function(e){return a.a.createElement(y,{key:e.name,name:e.name,number:e.number,deleteID:function(){return r=e.id,a=e.name,void v.deletePerson(r,a).then(function(e){console.log(e),t(o.filter(function(e){return e.id!==r})),n("".concat(a," succesfully deleted"))}).catch(function(e){console.log(e),n("Error: ".concat(a," already deleted"))});var r,a}})}))},E=function(e){var t=e.message;return console.log(t),"No Message"===t?null:t.includes("rror")?a.a.createElement("div",{className:"error"},t):a.a.createElement("div",{className:"message"},t)},P=(n(41),function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),s=Object(i.a)(c,2),f=s[0],m=s[1],p=Object(r.useState)(""),b=Object(i.a)(p,2),g=b[0],d=b[1],O=Object(r.useState)(""),y=Object(i.a)(O,2),P=y[0],N=y[1],D=Object(r.useState)("No Message"),k=Object(i.a)(D,2),M=k[0],S=k[1];return Object(r.useEffect)(function(){window.setTimeout(function(){return S("No Message")},5e3),console.log("set message use effect triggerd")},[n]),Object(r.useEffect)(function(){function e(){return(e=Object(l.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getPeople();case 2:t=e.sent,o(t),console.log("set persons use effect triggered");case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[M,f]),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(E,{message:M}),a.a.createElement(h,{newfilter:P,setFilter:N}),a.a.createElement("h2",null,"Add a New:"),a.a.createElement(w,{setMessage:S,persons:n,setPersons:o,newName:f,setNewName:m,newNumber:g,setNewNumber:d}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(j,{persons:n,filter:P,setPersons:o,setMessage:S}))});c.a.render(a.a.createElement(P,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.ee7bcf60.chunk.js.map